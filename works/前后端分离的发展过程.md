---
title: 前后端分离的发展过程
tags: [works]
date: 2016-9-23 19:59:14
categories: works
---

## 前后端未分离开发模式的缺点

1. 前端完成页面, 后端翻译成模版, 如果前端界面变动, 需要重新再走一遍流程, 开发效率低
2. 前后端代码强耦合, 维护成本高
3. 前后端分工不明确, 沟通成本高


## 分离与未分离的比较

1. 交互形式

在前后端分离架构中，后端只需要负责按照约定的数据格式向前端提供可调用的API服务即可.
前后端之间通过HTTP请求进行交互，前端获取到数据后，进行页面的装配和渲染.

2. 代码组织方式

- 半分离

前后端共用一个代码库，但是代码分别存放在两个工程中。
后端不关心或很少关心前端元素的输出情况，前端不能独立进行开发和测试，项目中缺乏前后端交互的测试用例

- 分离

前后端代码库分离，前端代码中有可以进行Mock测试，能支持前端的独立开发和测试.
而后端代码中除了功能实现外，还有着详细的测试用例，以保证API的可用性，降低集成风险.

3. 开发模式

- 前后端未分离的开发流程

提出需求 -> 前端开发 -> 后端翻译成模版 -> 前后端对接 -> 联调遇到问题 -> 前端返工 -> 后端返工 -> 二次集成 ->联调成功 -> 交付

- 前后端分离后的开发流程

提出需求 -> 约定数据接口 -> 前后端并行开发 -> 前后端联调 -> 前端调整页面 -> 联调成功 -> 交付

在开发模式上, 我们可以看到, 前后端分离不仅仅是工作内容的分离, 更重要的意义是可以并行开发, 简化了工作流程.


## 前后端分离的几种方案

1. Nginx + Server

将前端资源部署在Nginx上，后端服务部署在常规的服务器. 
当浏览器发起访问请求的时候，如果请求的是页面资源，Nginx直接把资源返回到前端；
如果请求是调用后端服务，则经过Nginx转发到后端服务器，完成响应后经Nginx返回到浏览器. 

缺点: Nginx 只是向浏览器返回页面静态资源，而国内的搜索引擎爬虫只会抓取静态数据，不会解析页面中的js，这使得应用得不到良好的搜索引擎支持. 同时因为 Nginx 不会进行页面的组装渲染，需要服务器把完成渲染工作，这加重了浏览器的渲染负担.

2. Node + Server

这是淘宝所使用的前后端分离模式，在浏览器与后端服务器之间增加一个了Node Server作为中间层，
将前端资源部署到 Node Server 中. Node Server 中还包含了一层 Model Proxy，负责与服务端进行通信.

浏览器发出的请求都被Node Server接收，然后通过Model Proxy调用后端服务器提供的服务. 
Node Server得到后端服务器反馈，接着在Node Server中完成页面的组装渲染，把最终页面返回给浏览器.

缺点: 浏览器所有发出的请求都需要经过Node Server进行中转，然后才能到达后端服务器. 
在实际的应用中，并不是所有的请求都需要页面渲染，只要在页面上直接调用后端服务器提供的服务即可. 
所以这个模式必然会对请求性能有所消耗.

3. Nginx + Node + Server

为了能解决方案2中请求性能损失的问题，我们可以考虑在其基础之上增加Nginx. 
浏览器发起的请求经过Nginx进行分发，URL请求统一分发到Node Server，在Node Server中进行页面组装渲染；
API请求则直接发送到后端服务器，完成响应.











------

作者 : 纪行川

博客 : 行川草庐

声明 : 网站内容可自由转载 , 转载请附上作者信息和详细链接
